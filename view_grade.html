<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    
    <title>BITS Pilani Grade Moderator</title>
</head>

<body onload="defaultState()">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-2"></div>
            <div class="col-sm-8">
                <div style="padding-top:15px; padding-bottom:15px;">
                    <h1>View Existing Grades</h1> 
                    <p>Choose the saved JSON file containg all details for the grades</p> 
                </div>
                <img src="imgs/separator.svg" class="mx-auto d-block" style="width:100%">
                <div style="padding-top: 15px;">
                    <form id="formJSON">
                        <input type="file" id="UploadJsonFile" accept=".json" style="width: 79.5%;"/>
                        <input type="submit" class="btn btn-primary" name="submit" style="width: 20%;"/>
                    </form>
                </div>
                <script>
                    const formSRC = document.getElementById("formJSON");
                    const jsonFile = document.getElementById("UploadJsonFile");
                    jsonText = "";

                    function openLoadedHistogram(){
                        window.open("histogram.html","_self");
                    }

                    formJSON.addEventListener("submit", function (e) {
                        e.preventDefault();
                        const input = jsonFile.files[0];
                        const reader = new FileReader();
                        
                        reader.onload = function (e) {
                        const text = e.target.result;
                        gradesDetails = JSON.parse(text);

                        sessionStorage.setItem("gradeObject", JSON.stringify(gradesDetails));
                        window.open("histogram.html","_self");

                        };
                        reader.readAsText(input);
                      });
                </script>
            </div>
            <div class="col-sm-2"></div>
        </div>
    </div>
</body>